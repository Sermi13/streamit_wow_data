/*! For license information please see auth.min.js.LICENSE.txt */
(()=>{"use strict";function e(){var r,n,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.toStringTag||"@@toStringTag";function s(e,o,a,i){var s=o&&o.prototype instanceof c?o:c,l=Object.create(s.prototype);return t(l,"_invoke",function(e,t,o){var a,i,s,c=0,l=o||[],d=!1,f={p:0,n:0,v:r,a:m,f:m.bind(r,4),d:function(e,t){return a=e,i=0,s=r,f.n=t,u}};function m(e,t){for(i=e,s=t,n=0;!d&&c&&!o&&n<l.length;n++){var o,a=l[n],m=f.p,v=a[2];e>3?(o=v===t)&&(s=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=r):a[0]<=m&&((o=e<2&&m<a[1])?(i=0,f.v=t,f.n=a[1]):m<v&&(o=e<3||a[0]>t||t>v)&&(a[4]=e,a[5]=t,f.n=v,i=0))}if(o||e>1)return u;throw d=!0,t}return function(o,l,v){if(c>1)throw TypeError("Generator is already running");for(d&&1===l&&m(l,v),i=l,s=v;(n=i<2?r:s)||!d;){a||(i?i<3?(i>1&&(f.n=-1),m(i,s)):f.n=s:f.v=s);try{if(c=2,a){if(i||(o="next"),n=a[o]){if(!(n=n.call(a,s)))throw TypeError("iterator result is not an object");if(!n.done)return n;s=n.value,i<2&&(i=0)}else 1===i&&(n=a.return)&&n.call(a),i<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=r}else if((n=(d=f.n<0)?s:e.call(t,f))!==u)break}catch(e){a=r,i=1,s=e}finally{c=1}}return{value:n,done:d}}}(e,a,i),!0),l}var u={};function c(){}function l(){}function d(){}n=Object.getPrototypeOf;var f=[][a]?n(n([][a]())):(t(n={},a,(function(){return this})),n),m=d.prototype=c.prototype=Object.create(f);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,t(e,i,"GeneratorFunction")),e.prototype=Object.create(m),e}return l.prototype=d,t(m,"constructor",d),t(d,"constructor",l),l.displayName="GeneratorFunction",t(d,i,"GeneratorFunction"),t(m),t(m,i,"Generator"),t(m,a,(function(){return this})),t(m,"toString",(function(){return"[object Generator]"})),(e=function(){return{w:s,m:v}})()}function t(e,r,n,o){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}t=function(e,r,n,o){if(r)a?a(e,r,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[r]=n;else{var i=function(r,n){t(e,r,(function(e){return this._invoke(r,n,e)}))};i("next",0),i("throw",1),i("return",2)}},t(e,r,n,o)}function r(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function n(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var i=e.apply(t,n);function s(e){r(i,o,a,s,u,"next",e)}function u(e){r(i,o,a,s,u,"throw",e)}s(void 0)}))}}var o=function(e,t){var r=document.querySelector("#".concat(e)),n=document.querySelector("#".concat(t));r&&n&&r.addEventListener("click",(function(){var e="password"===n.getAttribute("type")?"text":"password";n.setAttribute("type",e),this.classList.toggle("fa-eye-slash")}))};function a(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function i(e,t){var r=e.closest(".input-group").querySelector(".invalid-feedback");r&&(r.textContent=t,e.classList.add("is-invalid"))}function s(e){var t=e.closest(".input-group").querySelector(".invalid-feedback");t&&(t.textContent="",e.classList.remove("is-invalid"))}function u(e,t,r,n){t.textContent=e?r:n,t.disabled=e}function c(e,t){t.forEach((function(t){var r=e.querySelector('input[name="'.concat(t,'"]'));r&&r.addEventListener("input",(function(){return s(r)}))}))}o("togglePassword","password"),o("toggleConfirmPassword","confirm_password");var l=document.querySelector("#registerForm");if(l){var d=document.querySelector("#register-button"),f=document.querySelector("#error_message"),m=document.querySelector('meta[name="base-url"]').getAttribute("content");[l.querySelector('input[name="first_name"]'),l.querySelector('input[name="last_name"]')].forEach((function(e){e.addEventListener("input",(function(){var t=/[0-9]/g;t.test(e.value)?(e.value=e.value.replace(t,""),i(e,"Name field does not allow numbers.")):e.value.trim()?s(e):i(e,"This field is required.")}))})),c(l,["first_name","last_name","email","password","confirm_password"]),l.addEventListener("submit",function(){var t=n(e().m((function t(r){var n,o,s,c,v,p,y;return e().w((function(e){for(;;)switch(e.n){case 0:if(r.preventDefault(),t=void 0,g=void 0,b=void 0,S=void 0,h=void 0,w=void 0,t=!0,g=l.querySelector('input[name="first_name"]'),b=l.querySelector('input[name="last_name"]'),S=l.querySelector('input[name="email"]'),h=l.querySelector('input[name="password"]'),w=l.querySelector('input[name="confirm_password"]'),g.value.trim()||(i(g,"First Name field is required."),t=!1),b.value.trim()||(i(b,"Last Name field is required."),t=!1),S.value.trim()?a(S.value)||(i(S,"Enter a valid Email Address."),t=!1):(i(S,"Email field is required."),t=!1),h.value.trim()?h.value.length<8&&(i(h,"Password must be at least 8 characters long."),t=!1):(i(h,"Password field is required."),t=!1),h.value!==w.value&&(i(w,"Passwords and confirm password do not match."),t=!1),t){e.n=1;break}return e.a(2);case 1:return u(!0,d,"Signing Up...","Sign Up"),f.textContent="",e.p=2,n=new FormData(this),e.n=3,fetch("".concat(m,"/api/register?is_ajax=1"),{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:n});case 3:return o=e.v,e.n=4,o.json();case 4:if(s=e.v,o.ok&&s.status){e.n=5;break}return c=s.errors?Object.values(s.errors).flat()[0]:s.message||"An error occurred during registration",f.textContent=c,e.a(2);case 5:return e.n=6,fetch("".concat(m,"/api/login?is_ajax=1"),{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:n});case 6:return v=e.v,e.n=7,v.json();case 7:!0===(p=e.v).status?window.location.href="".concat(m):f.textContent=p.message||"Login after registration failed.",e.n=9;break;case 8:e.p=8,y=e.v,console.error("Registration error:",y),f.textContent="A system error occurred. Please try again later.";case 9:return e.p=9,u(!1,d,"","Sign Up"),e.f(9);case 10:return e.a(2)}var t,g,b,S,h,w}),t,this,[[2,8,9,10]])})));return function(e){return t.apply(this,arguments)}}())}var v=document.querySelector("#login-form");if(v){var p=document.querySelector("#login-button"),y=document.querySelector("#login_error_message"),g=document.querySelector('meta[name="base-url"]').getAttribute("content");c(v,["email","password"]),v.addEventListener("submit",function(){var t=n(e().m((function t(r){var n,o,s,c,l;return e().w((function(e){for(;;)switch(e.n){case 0:if(r.preventDefault(),t=void 0,d=void 0,f=void 0,t=!0,d=v.querySelector('input[name="email"]'),f=v.querySelector('input[name="password"]'),d.value.trim()?a(d.value)||(i(d,"Enter a valid Email Address."),t=!1):(i(d,"Email field is required."),t=!1),f.value.trim()||(i(f,"Password field is required."),t=!1),t){e.n=1;break}return e.a(2);case 1:return u(!0,p,"Signing In...","Sign In"),y.textContent="",e.p=2,n=new FormData(this),e.n=3,fetch("".concat(g,"/api/login?is_ajax=1"),{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:n});case 3:return o=e.v,e.n=4,o.json();case 4:if(s=e.v,o.ok&&s.status){e.n=5;break}return c=s.errors?Object.values(s.errors).flat()[0]:s.message||"Login failed",y.textContent=c,e.a(2);case 5:if(!s.device_limit_reached){e.n=6;break}return y.textContent="Your device limit has been reached.",e.a(2);case 6:window.location.href="".concat(g),e.n=8;break;case 7:e.p=7,l=e.v,console.error("Login error:",l),y.textContent="A system error occurred. Please try again later.";case 8:return e.p=8,u(!1,p,"","Sign In"),e.f(8);case 9:return e.a(2)}var t,d,f}),t,this,[[2,7,8,9]])})));return function(e){return t.apply(this,arguments)}}())}var b=document.querySelector("#forgetpassword-form");if(b){var S=document.querySelector("#forget_password_btn"),h=document.querySelector("#forgetpassword_error_message"),w=document.querySelector("#forget_password_msg"),q=document.querySelector('meta[name="base-url"]').getAttribute("content");c(b,["email"]),b.addEventListener("submit",function(){var t=n(e().m((function t(r){var n,o,s,c,l;return e().w((function(e){for(;;)switch(e.n){case 0:if(r.preventDefault(),t=void 0,d=void 0,t=!0,(d=b.querySelector('input[name="email"]')).value.trim()?a(d.value)||(i(d,"Enter a valid Email Address."),t=!1):(i(d,"Email field is required."),t=!1),t){e.n=1;break}return e.a(2);case 1:return u(!0,S,"Sending...","Submit"),h.textContent="",w.classList.add("d-none"),e.p=2,n=new FormData(this),e.n=3,fetch("".concat(q,"/api/forgot-password?is_ajax=1"),{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:n});case 3:return o=e.v,e.n=4,o.json();case 4:if(s=e.v,o.ok&&s.status){e.n=5;break}return c=s.errors?Object.values(s.errors).flat()[0]:s.message||"Password reset failed",h.textContent=c,e.a(2);case 5:w.classList.remove("d-none"),b.reset(),e.n=7;break;case 6:e.p=6,l=e.v,console.error("Forgot password error:",l),h.textContent="A system error occurred. Please try again later.";case 7:return e.p=7,u(!1,S,"","Submit"),e.f(7);case 8:return e.a(2)}var t,d}),t,this,[[2,6,7,8]])})));return function(e){return t.apply(this,arguments)}}())}})();
//# sourceMappingURL=auth.min.js.map